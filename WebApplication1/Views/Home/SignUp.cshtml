<main class="auth-page">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>Tạo Tài Khoản</h1>
                <p>Tham gia cùng hàng ngàn học viên trên EduLearn.</p>
            </div>

            <!-- User Type Toggle -->
            <div class="user-type-toggle">
                <div class="toggle-container">
                    <input type="radio" id="student-signup" name="userType" value="student" checked>
                    <input type="radio" id="admin-signup" name="userType" value="admin">
                    <div class="toggle-slider"></div>
                    <label for="student-signup" class="toggle-label">
                        <i class="fas fa-user-graduate"></i>
                        <span>Học Sinh</span>
                    </label>
                    <label for="admin-signup" class="toggle-label">
                        <i class="fas fa-user-shield"></i>
                        <span>Admin</span>
                    </label>
                </div>
            </div>

            <form class="auth-form" id="signupForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="lastName">Họ</label>
                        <div class="input-wrapper">
                            <i class="fas fa-user"></i>
                            <input type="text" id="lastName" name="lastName" placeholder="Nhập họ" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="firstName">Tên</label>
                        <div class="input-wrapper">
                            <i class="fas fa-user"></i>
                            <input type="text" id="firstName" name="firstName" placeholder="Nhập tên" required>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="phone-signup">Số điện thoại</label>
                    <div class="input-wrapper">
                        <i class="fas fa-phone"></i>
                        <input type="tel" id="phone-signup" name="phone" placeholder="Nhập số điện thoại" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password-signup">Mật khẩu</label>
                    <div class="input-wrapper">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password-signup" name="password" placeholder="Tạo mật khẩu" required>
                        <button type="button" class="password-toggle" id="togglePasswordSignup">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-fill"></div>
                        </div>
                        <span class="strength-text">Mật khẩu yếu</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Xác nhận mật khẩu</label>
                    <div class="input-wrapper">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Xác nhận mật khẩu" required>
                        <button type="button" class="password-toggle" id="toggleConfirmPassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-match" id="passwordMatch"></div>
                </div>

                <div class="form-checkbox">
                    <input type="checkbox" id="terms" required>
                    <label for="terms">
                        Tôi đồng ý với <a href="terms.html" target="_blank">Điều khoản dịch vụ</a>
                        và <a href="privacy.html" target="_blank">Chính sách quyền riêng tư</a>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    <span class="btn-text">Tạo Tài Khoản</span>
                    <div class="btn-loader">
                        <div class="spinner"></div>
                    </div>
                </button>
            </form>

            <div class="auth-footer">
                <p>Đã có tài khoản? <a href="/signin">Đăng nhập ngay</a></p>
            </div>
        </div>
    </div>
</main>

<script>
    // Mobile menu toggle
    document.getElementById('menuToggle').addEventListener('click', function() {
      document.querySelector('.main-nav').classList.toggle('active');
    });

    // Password toggle functions
    function setupPasswordToggle(toggleId, inputId) {
      document.getElementById(toggleId).addEventListener('click', function() {
        const passwordInput = document.getElementById(inputId);
        const icon = this.querySelector('i');

        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          passwordInput.type = 'password';
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      });
    }

    setupPasswordToggle('togglePasswordSignup', 'password-signup');
    setupPasswordToggle('toggleConfirmPassword', 'confirmPassword');

    // Password strength checker
    document.getElementById('password-signup').addEventListener('input', function() {
      const password = this.value;
      const strengthBar = document.querySelector('.strength-fill');
      const strengthText = document.querySelector('.strength-text');

      let strength = 0;
      let strengthLabel = 'Mật khẩu yếu';
      let strengthColor = '#ff4757';

      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password)) strength++;
      if (/[A-Z]/.test(password)) strength++;
      if (/[0-9]/.test(password)) strength++;
      if (/[^A-Za-z0-9]/.test(password)) strength++;

      switch (strength) {
        case 0:
        case 1:
          strengthLabel = 'Mật khẩu yếu';
          strengthColor = '#ff4757';
          break;
        case 2:
        case 3:
          strengthLabel = 'Mật khẩu trung bình';
          strengthColor = '#ffa502';
          break;
        case 4:
          strengthLabel = 'Mật khẩu mạnh';
          strengthColor = '#2ed573';
          break;
        case 5:
          strengthLabel = 'Mật khẩu rất mạnh';
          strengthColor = '#1dd1a1';
          break;
      }

      strengthBar.style.width = `${(strength / 5) * 100}%`;
      strengthBar.style.backgroundColor = strengthColor;
      strengthText.textContent = strengthLabel;
      strengthText.style.color = strengthColor;
    });

    // Password match checker
    function checkPasswordMatch() {
      const password = document.getElementById('password-signup').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const matchIndicator = document.getElementById('passwordMatch');

      if (confirmPassword === '') {
        matchIndicator.textContent = '';
        return;
      }

      if (password === confirmPassword) {
        matchIndicator.textContent = '✓ Mật khẩu khớp';
        matchIndicator.style.color = '#2ed573';
      } else {
        matchIndicator.textContent = '✗ Mật khẩu không khớp';
        matchIndicator.style.color = '#ff4757';
      }
    }

    document.getElementById('password-signup').addEventListener('input', checkPasswordMatch);
    document.getElementById('confirmPassword').addEventListener('input', checkPasswordMatch);

    // Form submission
    document.getElementById('signupForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const password = document.getElementById('password-signup').value;
      const confirmPassword = document.getElementById('confirmPassword').value;

      if (password !== confirmPassword) {
        alert('Mật khẩu xác nhận không khớp!');
        return;
      }

      const submitBtn = this.querySelector('button[type="submit"]');
      const btnText = submitBtn.querySelector('.btn-text');
      const btnLoader = submitBtn.querySelector('.btn-loader');

      // Show loading state
      submitBtn.classList.add('loading');
      btnText.style.opacity = '0';
      btnLoader.style.opacity = '1';

      // Simulate API call
      setTimeout(() => {
        const userType = document.querySelector('input[name="userType"]:checked').value;

        // Reset loading state
        submitBtn.classList.remove('loading');
        btnText.style.opacity = '1';
        btnLoader.style.opacity = '0';

        // Show success message and redirect
        alert('Đăng ký thành công!');
        window.location.href = 'login.html';
      }, 2000);
    });

    // User type toggle animation
    const userTypeInputs = document.querySelectorAll('input[name="userType"]');
    userTypeInputs.forEach(input => {
      input.addEventListener('change', function() {
        const authCard = document.querySelector('.auth-card');
        if (this.value === 'admin') {
          authCard.classList.add('admin-mode');
        } else {
          authCard.classList.remove('admin-mode');
        }
      });
    });
</script>